/* Easy Tabletop Fantasy – Fantasy-themed design with decorative borders
   Fantasy color palette: deep blues, gold, burgundy, forest green
*/
:root{
    color-scheme:light;
    /* Fantasy color palette */
    --bg:#faf8f4;
    --fg:#2c2416;
    --muted:#6b5d47;
    --line:#d4c4a8;
    --soft:#f5f1ea;
    --soft2:#faf8f4;
    --link:#4a5568;
    
    /* Fantasy accent colors */
    --fantasy-gold:#b8860b;
    --fantasy-gold-light:#d4af37;
    --fantasy-blue:#2c5282;
    --fantasy-blue-light:#4299e1;
    --fantasy-burgundy:#7c2d2d;
    --fantasy-burgundy-light:#a85555;
    --fantasy-green:#2d5016;
    --fantasy-green-light:#4a7c2d;
    
    --max:920px;
    --r:14px;
    --r2:18px;
    --shadow:0 2px 8px rgba(44,35,22,.08),0 8px 24px rgba(44,35,22,.12);
    --shadow-strong:0 4px 12px rgba(44,35,22,.15),0 12px 32px rgba(44,35,22,.2);
    --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
    --sans:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    --serif:Georgia,serif;
    
    /* Callout colors with fantasy theme */
    --note-b:#c4d4e8; --note-bg:#e8f0f8;
    --ex-b:#e8d4a8; --ex-bg:#f8f0e8;
    --warn-b:#e8a8a8; --warn-bg:#f8e8e8;
  }

  :root{
    --color-primary:#2c5282;
    --color-secondary:#6b5d47;
    --color-focus:#b8860b;
  }

  *{box-sizing:border-box}
  html{
    scroll-behavior:smooth;
    scroll-padding-top:80px;
  }
  body{height:100%}
  body{
    margin:0;
    font-family:var(--sans);
    line-height:1.55;
    color:var(--fg);
    background:
      radial-gradient(circle at 20% 50%, rgba(184,134,11,.03) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(44,82,130,.03) 0%, transparent 50%),
      linear-gradient(180deg,var(--soft2),var(--bg) 120px);
    -webkit-font-smoothing:antialiased;
    text-rendering:optimizeLegibility;
    position:relative;
  }
  
  /* Subtle texture overlay */
  body::before{
    content:'';
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background-image:
      repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(44,35,22,.01) 2px, rgba(44,35,22,.01) 4px),
      repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(44,35,22,.01) 2px, rgba(44,35,22,.01) 4px);
    pointer-events:none;
    z-index:0;
  }
  
  body > *{
    position:relative;
    z-index:1;
  }
  img,svg,video{max-width:100%;height:auto}
  a{color:var(--fantasy-blue);text-decoration-thickness:1px;text-underline-offset:2px}
  a:hover{color:var(--fantasy-gold)}
  ::selection{background:#e8f0ff}
  
  /* Layout */
  header,main,footer{max-width:var(--max);margin:0 auto;padding:18px}
  header{
    border-bottom:2px solid var(--fantasy-gold);
    background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(250,248,244,.9));
    backdrop-filter:saturate(150%) blur(8px);
    position:sticky;top:0;z-index:10;
    box-shadow:0 2px 8px rgba(44,35,22,.08);
  }
  main{padding-top:22px}
  footer{
    border-top:2px solid var(--fantasy-gold);
    font-size:.95rem;
    color:var(--muted);
    background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(250,248,244,.9));
    padding-top:24px;
    margin-top:32px;
  }
  
  /* Nav */
  nav{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
  nav a{
    text-decoration:none;
    padding:8px 10px;
    border-radius:999px;
    border:1px solid transparent;
    color:var(--muted);
  }
  nav a:hover{border-color:var(--line);background:rgba(255,255,255,.8);color:var(--fg)}
  nav a[aria-current="page"]{
    border-color:var(--fantasy-gold);
    background:linear-gradient(135deg, rgba(184,134,11,.1), rgba(212,175,55,.05));
    color:var(--fantasy-blue);
    font-weight:600;
    box-shadow:0 2px 4px rgba(184,134,11,.15);
  }
  
  /* Typography */
  h1,h2,h3{letter-spacing:-.01em;color:var(--fantasy-blue)}
  h1{
    font-size:1.85rem;
    line-height:1.15;
    margin:0 0 10px;
    background:linear-gradient(135deg, var(--fantasy-blue), var(--fantasy-burgundy));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
    scroll-margin-top:80px;
  }
  h2{
    font-size:1.25rem;
    line-height:1.25;
    margin:20px 0 10px;
    color:var(--fantasy-blue);
    scroll-margin-top:80px;
  }
  h3{
    font-size:1.06rem;
    line-height:1.3;
    margin:16px 0 8px;
    color:var(--fantasy-burgundy);
    scroll-margin-top:80px;
  }
  p{margin:0 0 10px;color:var(--fg)}
  p.lede{font-size:1.05rem;color:var(--muted)}
  hr{border:0;border-top:1px solid var(--line);margin:18px 0}
  small,.small{font-size:.95rem;color:var(--muted)}
  kbd{
    font-family:var(--mono);
    font-size:.9em;
    border:1px solid var(--line);
    background:#fff;
    border-bottom-color:#d9d9de;
    border-radius:8px;
    padding:2px 6px;
  }
  
  /* Lists */
  ul,ol{margin:0 0 10px 22px;padding:0}
  li{margin:0 0 6px}
  
  /* Inline code & blocks */
  code.dice,code{
    font-family:var(--mono);
    font-size:.95em;
    background:#fff;
    border:1px solid var(--line);
    border-radius:8px;
    padding:1px 6px;
  }
  pre,pre.formula{
    font-family:var(--mono);
    font-size:.95rem;
    border:1px solid var(--line);
    background:#fff;
    border-radius:var(--r);
    padding:12px 14px;
    overflow:auto;
    margin:0 0 12px;
    box-shadow:0 1px 0 rgba(0,0,0,.02);
  }
  pre code{border:0;background:transparent;padding:0}
  
  /* Formula box - centered, styled mathematical expressions */
  .formula-box{
    display:block;
    text-align:center;
    margin:16px auto;
    padding:16px 20px;
    background:linear-gradient(135deg, rgba(255,255,255,.98), rgba(250,248,244,.95));
    border:2px solid var(--fantasy-gold);
    border-radius:var(--r2);
    box-shadow:0 2px 8px rgba(184,134,11,.15);
    font-family:var(--serif);
    font-size:1.1rem;
    line-height:1.6;
    color:var(--fantasy-blue);
    max-width:500px;
  }
  
  .formula-box .formula-label{
    display:block;
    font-size:.9rem;
    color:var(--muted);
    margin-bottom:8px;
    font-weight:600;
    text-transform:uppercase;
    letter-spacing:.05em;
  }
  
  .formula-box .formula-equation{
    display:block;
    font-size:1.3rem;
    font-weight:600;
    color:var(--fantasy-blue);
    margin:8px 0;
  }
  
  .formula-box .formula-equation .variable{
    font-style:italic;
    color:var(--fantasy-burgundy);
  }
  
  .formula-box .formula-equation .operator{
    color:var(--fantasy-gold);
    margin:0 4px;
  }
  
  /* Tables */
  .table-wrap{
    overflow:auto;
    border:1px solid var(--line);
    border-radius:var(--r);
    background:#fff;
    box-shadow:0 1px 0 rgba(0,0,0,.02);
    margin:0 0 14px;
  }
  table{border-collapse:separate;border-spacing:0;width:100%;font-size:.98rem}
  thead th{
    position:sticky;top:0; /* helpt bij lange tabellen */
    background:linear-gradient(180deg,#fff,var(--soft));
    border-bottom:1px solid var(--line);
    font-weight:700;
  }
  th,td{
    text-align:left;
    vertical-align:top;
    padding:10px 12px;
    border-bottom:1px solid #f0f0f2;
  }
  tbody tr:last-child td{border-bottom:0}
  tbody tr:hover td{background:rgba(246,247,249,.7)}
  
  /* Buttons */
  .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .btn{
    display:inline-flex;
    align-items:center;
    gap:8px;
    border:2px solid var(--fantasy-gold);
    border-radius:999px;
    padding:10px 16px;
    background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(250,248,244,.9));
    text-decoration:none;
    color:var(--fantasy-blue);
    font-weight:500;
    box-shadow:0 2px 4px rgba(184,134,11,.15);
    transition:all 0.2s ease;
  }
  .btn:hover{
    background:linear-gradient(135deg, rgba(184,134,11,.1), rgba(212,175,55,.05));
    border-color:var(--fantasy-gold-light);
    box-shadow:0 4px 8px rgba(184,134,11,.25);
    transform:translateY(-1px);
  }
  .btn:active{transform:translateY(0)}
  
  /* Callouts */
  .callout{
    border:2px solid var(--line);
    border-radius:var(--r2);
    padding:14px 16px;
    background:linear-gradient(135deg, rgba(255,255,255,.98), rgba(250,248,244,.95));
    box-shadow:var(--shadow);
    margin:0 0 14px;
    position:relative;
  }
  
  .callout::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    width:4px;
    height:100%;
    background:var(--fantasy-gold);
    border-radius:var(--r2) 0 0 var(--r2);
  }
  .callout-title{font-weight:800;margin:0 0 6px;letter-spacing:-.01em}
  .callout.note{border-color:var(--note-b);background:var(--note-bg)}
  .callout.example{border-color:var(--ex-b);background:var(--ex-bg)}
  .callout.warning{border-color:var(--warn-b);background:var(--warn-bg)}
  .callout p{margin:0 0 8px}
  .callout p:last-child{margin:0}
  
  /* Feature highlight callout - special styling */
  .callout.feature{
    border:3px solid var(--fantasy-gold);
    background:linear-gradient(135deg, rgba(184,134,11,.08), rgba(212,175,55,.05));
    box-shadow:0 4px 16px rgba(184,134,11,.2),0 8px 32px rgba(44,35,22,.15);
    padding:20px 24px;
    margin:24px 0;
  }
  
  .callout.feature::before{
    width:6px;
    background:linear-gradient(180deg, var(--fantasy-gold), var(--fantasy-gold-light));
  }
  
  .callout.feature .callout-title{
    color:var(--fantasy-blue);
    font-size:1.1rem;
    margin-bottom:12px;
  }
  
  .callout.feature h3{
    color:var(--fantasy-burgundy);
    font-size:1rem;
    margin-top:16px;
    margin-bottom:8px;
    font-weight:700;
  }
  
  .callout.feature ul{
    margin:8px 0 8px 20px;
    list-style:none;
    padding-left:0;
  }
  
  .callout.feature ul li{
    position:relative;
    padding-left:20px;
    margin-bottom:6px;
  }
  
  .callout.feature ul li::before{
    content:'✦';
    position:absolute;
    left:0;
    color:var(--fantasy-gold);
    font-weight:bold;
  }
  
  .callout.feature .summary{
    margin-top:16px;
    padding-top:16px;
    border-top:1px solid rgba(184,134,11,.2);
    font-style:italic;
    color:var(--muted);
  }
  
  /* Rules layout + TOC */
  .layout{display:grid;grid-template-columns:1fr;gap:14px}
  @media(min-width:980px){
    .layout{grid-template-columns:240px 1fr;gap:18px}
    .toc{position:sticky;top:86px;align-self:start}
  }
  .toc{
    border:2px solid var(--fantasy-gold);
    border-radius:var(--r2);
    padding:14px 14px;
    background:linear-gradient(135deg, rgba(255,255,255,.95), rgba(250,248,244,.9));
    box-shadow:var(--shadow);
  }
  .toc h2{margin:0 0 10px;font-size:1rem;color:var(--muted);letter-spacing:.02em;text-transform:uppercase}
  .toc ul{margin:0 0 0 18px}
  .toc li{margin:0 0 6px}
  .toc a{color:var(--muted);text-decoration:none}
  .toc a:hover{color:var(--fg);text-decoration:underline}
  .toc-h3{margin-left:10px}
  
  /* Content "card" with fantasy decorative border */
  .content{
    position:relative;
    border:2px solid var(--fantasy-gold);
    border-radius:var(--r2);
    background:linear-gradient(135deg, rgba(255,255,255,.98), rgba(250,248,244,.95));
    padding:24px;
    box-shadow:var(--shadow-strong);
    margin:0 0 24px;
  }
  
  /* Decorative border using SVG pattern */
  .content::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
    border-radius:var(--r2);
    padding:2px;
    background:
      url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><defs><style>.border-path{fill:none;stroke:%23b8860b;stroke-width:0.8;opacity:0.6;}.corner-ornament{fill:%23b8860b;opacity:0.4;}</style></defs><rect x="5" y="5" width="90" height="90" class="border-path" rx="2"/><path d="M 5 5 Q 5 8 8 8 Q 8 5 5 5" class="corner-ornament"/><path d="M 8 8 Q 8 12 12 12 Q 12 8 8 8" class="corner-ornament" opacity="0.3"/><path d="M 95 5 Q 92 5 92 8 Q 95 8 95 5" class="corner-ornament"/><path d="M 92 8 Q 88 8 88 12 Q 92 12 92 8" class="corner-ornament" opacity="0.3"/><path d="M 5 95 Q 5 92 8 92 Q 8 95 5 95" class="corner-ornament"/><path d="M 8 92 Q 8 88 12 88 Q 12 92 8 92" class="corner-ornament" opacity="0.3"/><path d="M 95 95 Q 92 95 92 92 Q 95 92 95 95" class="corner-ornament"/><path d="M 92 92 Q 88 92 88 88 Q 92 88 92 92" class="corner-ornament" opacity="0.3"/><circle cx="25" cy="5" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="50" cy="5" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="75" cy="5" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="25" cy="95" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="50" cy="95" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="75" cy="95" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="5" cy="25" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="5" cy="50" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="5" cy="75" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="95" cy="25" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="95" cy="50" r="1.5" class="corner-ornament" opacity="0.2"/><circle cx="95" cy="75" r="1.5" class="corner-ornament" opacity="0.2"/></svg>')
      repeat;
    background-size:40px 40px;
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite:xor;
    mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask-composite:exclude;
    pointer-events:none;
    z-index:0;
  }
  
  .content > *{
    position:relative;
    z-index:1;
  }
  
  /* Enhanced card hover effect */
  .content:hover{
    border-color:var(--fantasy-gold-light);
    box-shadow:0 4px 16px rgba(184,134,11,.2),0 12px 40px rgba(44,35,22,.25);
    transform:translateY(-2px);
    transition:all 0.3s ease;
  }
  
  /* Print */
  @media print{
    header,nav,.toc,.btnrow{display:none !important}
    body{background:#fff}
    main,footer{max-width:none;padding:0}
    .content{border:0;box-shadow:none;padding:0}
    a{text-decoration:none;color:inherit}
  }
  
  /* Dark mode with fantasy theme */
@media (prefers-color-scheme: dark){
    :root{
      color-scheme:dark;
      --bg:#1a1610;
      --fg:#e8e0d4;
      --muted:#9d8f7a;
      --line:#3d3528;
      --soft:#1f1a14;
      --soft2:#1a1610;
      --link:#d4af37;
      
      /* Dark mode fantasy colors - warmer, deeper */
      --fantasy-gold:#d4af37;
      --fantasy-gold-light:#f4d03f;
      --fantasy-blue:#5a8fc7;
      --fantasy-blue-light:#7bb3e8;
      --fantasy-burgundy:#a85555;
      --fantasy-burgundy-light:#c77a7a;
      --fantasy-green:#5a8f4a;
      --fantasy-green-light:#7bb36a;
      
      --shadow:0 2px 8px rgba(0,0,0,.4),0 8px 24px rgba(0,0,0,.5);
      --shadow-strong:0 4px 12px rgba(0,0,0,.5),0 12px 32px rgba(0,0,0,.6);
      --note-b:#2a3c63; --note-bg:#0e1626;
      --ex-b:#4a3d20; --ex-bg:#1a1410;
      --warn-b:#5a2222; --warn-bg:#1a0b0b;
    }
  
    body{
      background:
        radial-gradient(circle at 20% 50%, rgba(212,175,55,.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(90,143,199,.05) 0%, transparent 50%),
        linear-gradient(180deg,var(--soft2),var(--bg) 120px);
    }
    
    body::before{
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(232,224,212,.02) 2px, rgba(232,224,212,.02) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(232,224,212,.02) 2px, rgba(232,224,212,.02) 4px);
    }
    header{
      background:linear-gradient(135deg, rgba(26,22,16,.95), rgba(31,26,20,.9));
      border-bottom-color:var(--fantasy-gold);
      box-shadow:0 2px 8px rgba(0,0,0,.3);
    }
    footer{border-top-color:var(--line);color:var(--muted)}
  
    a:hover{color:#fff}
  
    nav a{color:var(--muted)}
    nav a:hover{border-color:var(--line);background:rgba(255,255,255,.04);color:var(--fg)}
    nav a[aria-current="page"]{
      background:linear-gradient(135deg, rgba(212,175,55,.15), rgba(244,208,63,.1));
      border-color:var(--fantasy-gold);
      color:var(--fantasy-gold-light);
      box-shadow:0 2px 4px rgba(212,175,55,.2);
    }
  
    hr{border-top-color:var(--line)}
  
    code.dice,code{
      background:rgba(255,255,255,.04);
      border-color:var(--line);
      color:var(--fg);
    }
  
    pre,pre.formula{
      background:rgba(255,255,255,.03);
      border-color:var(--line);
      box-shadow:none;
    }
  
    .table-wrap{
      border-color:var(--line);
      background:rgba(255,255,255,.02);
      box-shadow:none;
    }
    table{color:var(--fg)}
    thead th{
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border-bottom-color:var(--line);
    }
    th,td{border-bottom-color:rgba(255,255,255,.06)}
    tbody tr:hover td{background:rgba(255,255,255,.03)}
  
    .btn{
      background:rgba(255,255,255,.04);
      border-color:var(--line);
      color:var(--fg);
      box-shadow:none;
    }
    .btn:hover{background:rgba(255,255,255,.07);border-color:#2b3140}
  
    .callout{
      border-color:var(--line);
      background:rgba(255,255,255,.03);
      box-shadow:none;
    }
    .callout.note{border-color:var(--note-b);background:var(--note-bg)}
    .callout.example{border-color:var(--ex-b);background:var(--ex-bg)}
    .callout.warning{border-color:var(--warn-b);background:var(--warn-bg)}
    
    .callout.feature{
      border-color:var(--fantasy-gold);
      background:linear-gradient(135deg, rgba(212,175,55,.12), rgba(244,208,63,.08));
      box-shadow:0 4px 16px rgba(212,175,55,.3),0 8px 32px rgba(0,0,0,.4);
    }
    
    .callout.feature::before{
      background:linear-gradient(180deg, var(--fantasy-gold), var(--fantasy-gold-light));
    }
    
    .callout.feature .callout-title{
      color:var(--fantasy-blue-light);
    }
    
    .callout.feature h3{
      color:var(--fantasy-burgundy-light);
    }
    
    .callout.feature .summary{
      border-top-color:rgba(212,175,55,.3);
      color:var(--muted);
    }
    
    .formula-box{
      background:linear-gradient(135deg, rgba(26,22,16,.95), rgba(31,26,20,.9));
      border-color:var(--fantasy-gold);
      box-shadow:0 2px 8px rgba(212,175,55,.2);
      color:var(--fantasy-blue-light);
    }
    
    .formula-box .formula-label{
      color:var(--muted);
    }
    
    .formula-box .formula-equation{
      color:var(--fantasy-blue-light);
    }
    
    .formula-box .formula-equation .variable{
      color:var(--fantasy-burgundy-light);
    }
    
    .formula-box .formula-equation .operator{
      color:var(--fantasy-gold);
    }
  
    .toc{
      border-color:var(--line);
      background:rgba(255,255,255,.03);
      box-shadow:none;
    }
    .toc h2{color:var(--muted)}
    .toc a{color:var(--muted)}
    .toc a:hover{color:var(--fg)}
  
    .content{
      border-color:var(--fantasy-gold);
      background:linear-gradient(135deg, rgba(26,22,16,.95), rgba(31,26,20,.9));
      box-shadow:var(--shadow-strong);
    }
    
    .content:hover{
      border-color:var(--fantasy-gold-light);
      box-shadow:0 4px 16px rgba(212,175,55,.3),0 12px 40px rgba(0,0,0,.5);
    }
    
    h1{
      background:linear-gradient(135deg, var(--fantasy-blue-light), var(--fantasy-burgundy-light));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    
    h2{color:var(--fantasy-blue-light)}
    h3{color:var(--fantasy-burgundy-light)}
    
    .btn{
      border-color:var(--fantasy-gold);
      background:linear-gradient(135deg, rgba(26,22,16,.95), rgba(31,26,20,.9));
      color:var(--fantasy-gold-light);
    }
    
    .btn:hover{
      background:linear-gradient(135deg, rgba(212,175,55,.2), rgba(244,208,63,.15));
      border-color:var(--fantasy-gold-light);
    }
    
    .toc{
      border-color:var(--fantasy-gold);
      background:linear-gradient(135deg, rgba(26,22,16,.95), rgba(31,26,20,.9));
    }
    
    footer{
      border-top-color:var(--fantasy-gold);
      background:linear-gradient(135deg, rgba(26,22,16,.95), rgba(31,26,20,.9));
    }
  
    ::selection{background:rgba(212,175,55,.3)}
    
    :root{
      --color-primary:#7bb3e8;
      --color-secondary:#9d8f7a;
      --color-focus:#d4af37;
    }
  }